### 주요 모듈:
1. **AP (Application)**  
   - 최상위 애플리케이션 계층으로, 이벤트 감지 및 실행을 담당합니다.
   - **주요 역할**:
     - **Listener**: 각종 이벤트(초음파 감지, 방향 명령)를 수신합니다.
     - **Service**: 명령 실행 로직을 호출하여 적절한 동작을 수행합니다.

2. **Driver**  
   - 하드웨어를 직접 제어하는 계층으로, 센서 및 모터와의 인터페이스를 제공합니다.
   - **주요 역할**:
     - **HC-SR04**: 초음파 센서를 초기화하고 거리 데이터를 수집합니다.
     - **Motor**: DC 모터를 제어하여 차량 이동(전진, 후진, 좌회전, 우회전)을 실행합니다.

3. **Model**  
   - 시스템 상태를 저장하고 관리하는 계층으로, 방향 및 센서 상태와 UART 데이터를 유지합니다.
   - **주요 역할**:
     - **Direction**: 좌/우 방향 상태를 저장하고 업데이트합니다.
     - **HC**: 초음파 센서의 데이터를 저장합니다.
     - **UART**: 통신 상태 및 데이터를 관리합니다.

4. **Periph (Peripheral)**  
   - 하드웨어 주변 장치를 제어하는 드라이버 계층으로, GPIO, 타이머, UART를 관리합니다.
   - **주요 역할**:
     - **GPIO**: 센서 및 모터와의 디지털 신호 핸들링.
     - **TIM**: 타이머 드라이버를 사용하여 PWM 신호 생성.
     - **UART**: UART 드라이버를 통해 Jetson Nano와 통신.

## **모듈별 상세 설명**

### 1. AP (Application)
- **Listener**:
  - 초음파 센서, UART 데이터를 감지하여 이벤트를 수집합니다.
  - 예: 장애물 감지 이벤트 발생 시 Driver 모듈에 신호를 전달.
- **Service**:
  - Listener에서 전달받은 이벤트를 처리하고 적절한 동작을 실행합니다.
  - 예: 장애물 감지 → RC카 정지 명령 실행.

### 2. Driver
- **HC-SR04**:
  - 초음파 센서를 초기화하고 거리 데이터를 지속적으로 읽어옵니다.
  - 일정 거리 이하의 장애물이 감지되면 AP 모듈에 이벤트를 전달합니다.
- **Motor**:
  - 모터의 속도와 방향을 제어하며, PWM 신호를 생성하여 모터 드라이버(L298N)에 전달합니다.

### 3. Model
- **Direction**:
  - RC카의 현재 방향 상태를 저장(예: 좌회전, 우회전, 정지).
  - Service 모듈에서 명령을 받을 때 업데이트됩니다.
- **HC**:
  - 초음파 센서의 거리 데이터를 저장하여 Driver 모듈과 통신합니다.
- **UART**:
  - Jetson Nano와의 직렬 통신 데이터를 저장 및 관리합니다.
  - 데이터는 포즈 인식 결과를 기반으로 방향 명령을 포함합니다.

### 4. Periph (Peripheral)
- **GPIO**:
  - 센서 및 모터와 연결된 핀의 디지털 신호를 처리합니다.
- **TIM**:
  - PWM 신호를 생성하여 모터의 속도 제어를 지원합니다.
  - 타이머를 사용해 주기적인 신호를 발생시킵니다.
- **UART**:
  - UART 드라이버를 통해 Jetson Nano와의 데이터 송수신을 처리합니다.
  - 예: 포즈 인식 결과 데이터를 UART로 수신.


## **코드 흐름**
### 1. 장애물 감지 시나리오:
1. HC-SR04 초음파 센서에서 장애물을 감지.
2. Driver 모듈이 데이터를 읽어 AP 모듈로 전달.
3. AP 모듈이 Service 로직을 호출하여 RC카 정지 명령 실행.
4. Model 모듈이 상태를 저장하고 UART로 상태를 송신.

### 2. 포즈 인식 명령 시나리오:
1. Jetson Nano에서 "포즈 데이터" 문자를 UART로 송신.
2. Periph 모듈이 UART 데이터를 수신하고 Driver 모듈로 전달.
3. Motor 모듈이 PWM 신호를 생성하여 RC카를 좌회전.


## **주요 코드 구조**
```plaintext
├── AP
│   ├── Listener.c   # 이벤트 수신
│   └── Service.c    # 명령 실행
├── Driver
│   ├── HC_SR04.c    # 초음파 센서 제어
│   └── Motor.c      # 모터 제어
├── Model
│   ├── Direction.c  # 방향 상태 저장
│   ├── HC.c         # 센서 데이터 저장
│   └── UART.c       # 통신 상태 관리
├── Periph
│   ├── GPIO.c       # GPIO 제어
│   ├── TIM.c        # 타이머 및 PWM 생성
│   └── UART.c       # UART 통신 제어
```


## **H/W 및 S/W 통합 시나리오**

### 장애물 회피:
1. **HC-SR04** 센서가 초음파 데이터를 수집.
2. 일정 거리 이하로 장애물 감지 시 **Listener**에서 이벤트를 발생.
3. **Service**에서 "정지" 명령을 실행하여 **Motor** 정지.

### 좌/우회전:
1. **Jetson Nano**에서 포즈 인식 결과로 "좌회전" 데이터 송신.
2. **UART 드라이버**에서 데이터를 수신하고 **Model** 업데이트.
3. **Motor** 모듈에서 PWM 신호로 좌회전을 실행.
